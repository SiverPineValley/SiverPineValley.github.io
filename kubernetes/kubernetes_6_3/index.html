<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.1"/><meta name="description" content="6.8 헤드리스 서비스(None) 헤드리스(Headless) 서비스는 대상이 되는 개별 파드의 IP주소가 직접 반환되는 서비스이다. 지금까지 소개한 다른 서비스에서 부하 분산을 위해 제고오디는 엔드포인트는 가상 IP로 로드 밸런싱 동작을 하기 위해 여러 파드로 전송되는 IP…" data-gatsby-head="true"/><meta property="og:title" content="[쿠버네티스 완벽 가이드] 14. 서비스 API 카테고리 (3) - 헤드리스, ExternalName, None-Selector, 인그레스" data-gatsby-head="true"/><meta property="og:description" content="6.8 헤드리스 서비스(None) 헤드리스(Headless) 서비스는 대상이 되는 개별 파드의 IP주소가 직접 반환되는 서비스이다. 지금까지 소개한 다른 서비스에서 부하 분산을 위해 제고오디는 엔드포인트는 가상 IP로 로드 밸런싱 동작을 하기 위해 여러 파드로 전송되는 IP…" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta name="github:card" content="summary" data-gatsby-head="true"/><meta name="github:creator" content="https://github.com/SiverPineValley/SiverPineValley.github.io" data-gatsby-head="true"/><meta name="github:title" content="[쿠버네티스 완벽 가이드] 14. 서비스 API 카테고리 (3) - 헤드리스, ExternalName, None-Selector, 인그레스" data-gatsby-head="true"/><meta name="github:description" content="6.8 헤드리스 서비스(None) 헤드리스(Headless) 서비스는 대상이 되는 개별 파드의 IP주소가 직접 반환되는 서비스이다. 지금까지 소개한 다른 서비스에서 부하 분산을 위해 제고오디는 엔드포인트는 가상 IP로 로드 밸런싱 동작을 하기 위해 여러 파드로 전송되는 IP…" data-gatsby-head="true"/><style data-href="/styles.cf3dca79c4c295eec224.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat Variable;font-style:normal;font-weight:100 900;src:url(/static/montserrat-cyrillic-ext-wght-normal-e84e812b71d18e04e6928fb272665c53.woff2) format("woff2-variations");unicode-range:u+0460-052f,u+1c80-1c88,u+20b4,u+2de0-2dff,u+a640-a69f,u+fe2e-fe2f}@font-face{font-display:swap;font-family:Montserrat Variable;font-style:normal;font-weight:100 900;src:url(/static/montserrat-cyrillic-wght-normal-eb1783eb42487132539645641f761eb2.woff2) format("woff2-variations");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Montserrat Variable;font-style:normal;font-weight:100 900;src:url(data:font/woff2;base64,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) format("woff2-variations");unicode-range:u+0102-0103,u+0110-0111,u+0128-0129,u+0168-0169,u+01a0-01a1,u+01af-01b0,u+0300-0301,u+0303-0304,u+0308-0309,u+0323,u+0329,u+1ea0-1ef9,u+20ab}@font-face{font-display:swap;font-family:Montserrat Variable;font-style:normal;font-weight:100 900;src:url(/static/montserrat-latin-ext-wght-normal-82d636d9375dd92118fd22c818a99c24.woff2) format("woff2-variations");unicode-range:u+0100-02af,u+0304,u+0308,u+0329,u+1e00-1e9f,u+1ef2-1eff,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:Montserrat Variable;font-style:normal;font-weight:100 900;src:url(/static/montserrat-latin-wght-normal-5028c63f6a70ab0cf7cba9015ae04154.woff2) format("woff2-variations");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+0304,u+0308,u+0329,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-cyrillic-ext-400-normal-2a880e22b1b888ab54652a36d43b7f16.woff2) format("woff2"),url(/static/merriweather-cyrillic-ext-400-normal-7d8546944154663cc54693d15bb31721.woff) format("woff");unicode-range:u+0460-052f,u+1c80-1c88,u+20b4,u+2de0-2dff,u+a640-a69f,u+fe2e-fe2f}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-cyrillic-400-normal-fde0b55efc50742fb57fbebbb11c572f.woff2) format("woff2"),url(/static/merriweather-cyrillic-400-normal-2e7c71643f6e0e4c1e73f28a7a1798e6.woff) format("woff");unicode-range:u+0301,u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(data:font/woff;base64,d09GRgABAAAAABb4AA4AAAAAKjAAAQABAAAAAAAAAAAAAAAAAAAAAAAAAABHREVGAAABRAAAAEgAAABYAyADHUdQT1MAAAGMAAAAHgAAAB5EdEx1R1NVQgAAAawAAAAtAAAALiN2JIJPUy8yAAAB3AAAAE4AAABgVenG4WNtYXAAAAIsAAAA6QAAAVAuals7Z2FzcAAAAxgAAAAIAAAACAAAABBnbHlmAAADIAAADk0AABqga/uCpmhlYWQAABFwAAAANgAAADYPKck3aGhlYQAAEagAAAAfAAAAJAeyA/RobXR4AAARyAAAAJUAAAIeF6kFK2xvY2EAABJgAAABJAAAAS6WdJAhbWF4cAAAE4QAAAAgAAAAIAH3DnBuYW1lAAATpAAAAQ4AAAJyNQ1RQXBvc3QAABS0AAACQQAABgKiPTjieNolxoEFgAAUANH7ERCEgCQNkACJNEAEJGmABEg0f0eH5wgg4y/xUnKCglIram1otaPXgVEnZl1YdWPXg1Mvbn14iQ+rPQY+AAEAAAAKABwAHAABREZMVAAIAAQAAAAA//8AAAAAAAB42mNgZGBg4GLQAUJmFzefEAaJ5MqiHAaRnMSSPAYRBhBgARH//4NIAJZPBzwAAAB42mNgYZrIOIGBlYGBqYspgoGBwRtCM8YxGDH6AvlAKQhQgDCZGKAgOMRZgeEAUHw1841/7xkYWDQZBRUYGKeD5Ji0mZ6DtTADABB/C90AAHjaVIkBBoAwAEXf30IQixCYAeoOHahutQCEOkh3CJ0hBBYz6MF7PMAAFuiwKLvSBPQ4LDXQEGTVatSiVYd/w5YSlGPkNGhW1O5jPkpPuvlxnajkVxA84DYAAAAAvGC2bTOzbWW23dTu+3tXq16jZq3adYICm+qc6fZkSdKIbzPCqp2ocarMvgqHKh2pcqzcgUJbiu0osavUniLbWt1oc6vdnQbnmlxqdqXFtUYXujzq9GDIp2Ffer3o92bAu0Ef+rwa9WPcnwn/JgWM+TUlaFrIrIh5MQviFiXMiVqVsSJtTda6XB6SuisIAAAAAAEAAf//AA942nyWBVwbyxbGz8yGLCVACTHCw5IAwSW2EBwqWBWrpXr93robTt2h193d3d3d3d3dyb6Z2WV+m98rrxL575nzfXPOSABDJ4AQg28BASYCOBxGhyC5JbfoFm2iTRJiRlvxrbdLV18dvPCSsiuvCJ6Pbxl9UrrykrJrri2/7Jz6awGw/At5eQh/R8abAZDXZLM4/JLbIdosLr+E3KLgQM4Vv1SH/2wrDr9b3PldNSqxJx0PMv5udHpMaWnMyAh9xYlz5oUfAFlW8gkvgBN0ACDAAOoC4PwNzg+McdmniXfRePa8B83SjHuFjzs4Tr5DEfxVzg+PE38kQv91cCmK/Hn/OOOGx+EjWq5L5/yoVgd/xzlTO0aeITZ/DEXyn/g1/APYoQDA5PZ7PVLA67FazHq9y+nOdpHuGF1+b5TLaPV6q7Hfl+1yinqX0ds3fSA9GEy9+7bQlcuTgpVpu9taWpD9BpeU1rK2dvee1Bxj3A34qliPTnfPVRvuOEGnK41BRT5f+IVo1Dx88vmX6oTwN7LM9TEkAgCCIgC8AX8BNubGYXO53UZJ8lroe5ZkE8mq6ZuNRuPLU/+8Il6S4q9Ayf6K1NHX2qjWOUv04c+Fts87hfDrMd2J15fGyDLLuI/N3Kx2pAOAKfvwBtIRxllfpqgdYc/ZuD7NuGENP6DhIxq+QZfO+VGtDv6Cc6rD4zV5hrR5hHs4H6QcEATIywKSx6BUxiIa2R4aDqHsUCj8zgJaAE/s6BFDSWkMzROQfSzeCamKLjzN8rM8whucD6ncSvgA01X4IOWAwSn/hm8iHYqHZABrdrbfF+ArBOstZqvXE6DL4o/9jV1nLjr3srnnLG5ftXzp4tWnLTMsvGb12usXPXb9+puW4MevuuT0G66/5IyriBbLyTw41J6cCsC4j/DXFc56corSE/48ctzwOHxEy3XpnB/V6uAfOGc6x8gzhE7lNXhHWAIpkAMAetGqbpCxatjoznB7rRZgpXCysuB3WmpLSkk5TmCV6ZrsLktBbTj8HanMElIhIXrBxJLhhaQ2SpkcuvzypPioBP2/H9Ay0XIxT0z7NeIpl3nqQ+v4HIgnzrVz0Mb38njK3+B8KILfw/kg5YAgie3ML8BOu+43KkuOdZt+8dIvetfXe6ciQ8eS+fPnt3/VNLI1+rzL0EqyDOPCO3dt6t2CeuLIkgwPnXu2LJN8PpbPCcWq3zVMn+kIb3A+hHaO6QvRbH5gipQmb6zYVj3z4KTuksZszA96SJFRfXBk6/DeqfgLrZfKfFre+umGcPe5ZzOrir4gsnp51PruUH35CF/CeQ/arvLI+F4eT/kbnA9F8Hs4HyScz5vxYpWzecu/AuAj+Au2HwVWdZNNMrGKCxa25ZHxo0oUNWN/RubQ7E/rXloVvnU5cqCdrNa/trai2Fj6afPnhlJ2Esi/yj6W0Qnl6kzqgXKmJLzGeS9qAs51dpWL0E34vTz+Hh4/SDhBUEhWUBKWwAWFAIGARLYA3QOiuxp7PWSrGL0WPWuTX3mzkhBlixTee8hcWuidlWOPm7KgaGpbZoW5ypZiTuuSGhd9Oyll+Up/4a9zhZTigD3V4jNkprg7G8MPFETFGFMdaZ626aEM67UNZP/JsuJB6CDeqpm3bcgIwPnrnO/g3MfjlZPG/n/H7Yzgb3C+K4K/zPluDW8VXuV8T4T+gv/R3zqOzt4I/ibn+8bR36/VwRLnTIfHhzjvpvGAIYfwTsELmVAKgNx+yWuzkNs3soX82PO7/F4ckIzZY2ceuvyE27CtsTGYUZycbEuZF6hcVjFlYI4vd2CgvcEYHXRMD82uw1/H5icmrPeN3lUkRiemZjiLKrfN79g3y9DiGz3gsqEVsaaN2047CTDky7+hP3AQrJAOYFVVrTaz6LDS00CyETemgJ/Ji1f31G9sDZ0oiOEr8ZxZOV1JptQ1FScIyF8enBxlOH+wa7DxxMVVGcs2p5oL0gpQp8Va19K+TJapCl7EejRN7VEmAOM+9AfrEeGsRwlqj9hzNs4gvMHH7dVwh/Am5/sQ5yTfy5zv1+rgIOdMh8eHOO+OyJPF+XbKAUEeefHiMvYLgXVO+YWwtfUcbJsZ/mMWej/Rb0oMm6JLSyfQPHlE1yvQfd7J5rcJrlD04Uqmw/Ix/U5FH66gXP6C8JOELM63U66eAx4yjzh6ZyTyXwl02eg092Jh8+bJ3T3sBTU2T2qZ3DKlGa0enHxh//zBSRf2f7Vm1cp++l9dpaexzsxTO1PKV7WHdYZw1pkSpTP8OXEivMHH7Y3gb3K+L4K/zPl+rQ4Ocs50eHyI824aDxhyCQ/ha8n8s9QK2ALssqKFEHk12OJVC5JLCjHFV5SH5uIqfwOrytopzZNZXWhVkmOasiaSW6uqyzRtDyvQif1KhYgPpiesJz6WMh9bmG/KfcwH48x3AQCPX8f5Zh5PeYjz7giexfl2ygFBJuEd7MQHHT/WjcqaMytbU/3mFclD9OZ/HMs8oell+5DJmJ+bMyW58Uxkq0Qpuf+ZYLU7HZ7j1iJnQkFcbPiqYF2604a2si/RhWI0cUHUfEzNCSeps6lk7pgLIcR5Nyrm7naS2ZM5W49lS9MS6o+fa1drDW5x5KB5uNzPXKZQ/4ZjuZyQX0i7E5xqCpcSu2w2Y952ss6cqnamGNS5UG+cs7nw+HWcb+bxlIc4747gWZxv1/AOxk8CzgHJo7KIK3C+co66/UoxXAL7WcF/X2AxHruWO0S9K6GkyVlyf9FP05YW5c9teMoznOwsay37S6fr0ukaFqEf4oqLY8NvHRlG2bH0U3VV5xJyC3MVJ6xRZ3cdwBgX1nG+GRVoeIjz7giexfl2ysl7BwBeIATYbybvOPeTcj1pbic/v52iHH4HujR0NTZ1dlbZapKTzPULi2d5ti7PrzzjjLYas1jpKm+sKUJZYSP6Af+kLzLGbfCHqwr0BqPd1ViyqOGkbQkd/vDELPu3hoT2uS3THpZobe/DB6FRsEMsAGbS7NxzuVwZbqczw52J8MHMlIy8zBRnDomeh/dDA6mFCJCYne2WbKJrQvv0uMaLshA+WttsrXncQaJuJlHnk/UTBSDQa06cfmGrZU82vv6JWueGBKrahLfDrcIC0MN/+zAHIPmRMIon3TNxdyczE4+RzGL+Yy3Otm3btm3btu278hXORvGurCufOpmsbmevUq7+3vf6/VoVJmnyPu/3q9dUr7nRux7u83H6hhvcT+iYvcHNzONwV8YMnFFr/XbKHKHvjTYAV2psWwVdNtbr9ToQsB0wsXUD3Dy9dc0QZN4bzlRwTEXT29SCjhuA65gPKRWHqgWTjKTMMHk/TJnj/dfWb2Qn7KSJ3Uy8Lc/UM76dtIntElgHv89bpkY83V43Z5qa6mTiLtV9GhzLHExXQSbKL9ygVI33oyh5+ukps2QjBRE1nU5rIF8YrG9aWoyHNXBaRhYVUUogKyOvTwZNO60qMT6lyAGbfzrMxv98GLDhlrMpFiqFbNErsZ9W0vlpzy1MBTM8CeaYLeFXQeogRIMOd3a4vAGb2xfbd2SDEa/SEdeEIyIuW1+2Y/pgD87f0S5tlwhG7AQnmBfg18u4TFw+cdkV/uXw6xsyhx+evpGO2Q2Wmafo36gU7bMMS78fQdlhL3bAcu3+gRrbYye3bcPybhsinucKzZ0VXpncLFhH28A68yZ8O7xro/RpYP/hUvdsjYZvS3U8mMr5lmYgw5XqpDUN63qKkFzarQ0Mg+Ci69Z7VPV5KDCH05vTXc6iVBwpByhGJBwRIZUM3ARAVe0k0zQQnIbEQqIiiEQpS0NO3MV0MJGSgsCAf04ElzM300ziTHohN240b85cXI4hmMrZ8+4BqQ12Bk2W5XarTcQAaLBglyFc//ZOfld054bDBA/k2Fw2K/ExRRhuRNVPoOrXRuoRtzXU9QPc+bMnZler13bNd27PjVU/MVCniWSZLlVfiMSP4l65QNdomyMawh1OIHGWzcntWd1QZBl4E6t9OEmkyiIWy3EAeiC+bkq3NV4ScEy4dJy3Y6i36+DndA001t6TvG+Mt3V1u6JnVJJAxOTLUqusuxrSkZaUynusdvZAi2BZTqmq18BYVhIJ8sc4R3uDS9lZ+mKLBzsuGZL2R7vgtMvWT52UPekC77xLihfB1kO99MGodId19NHmnaM65jeacliXCBlGdU/vklv/hPxDUd1g03Lvmpy4ou4v+qLLMGVat/z04PjuEh49tah3BVYJwU5asTngJbuDTFaKrTtyJA/+KYuKJstETmgcmAfxetUpmzydrzAftYx6Phqmnv+/1M1RvyvXTPn1UdMx0W62OL9jwa/MzWEuzsqds/DjbXSOl2r7DcmMP7cj6NZrtRbbBttvAk88rG40jaMbVZ2XE4aeECFGEw1mUfWLQDXaMeNV0zNkuJ+/7QrVfZtG/TDv8DGqp1LVq6nXNNNYfZKvQLHQbHmvHCeIoqQnHR2CGm4OMDZB19sKdHeZnqKdN98EziocLwsCFhUiDWC8lCe6rCYhx+4Rmqku93Jc6OVL6qUZMFqCNKLkLd1XxriJ32hWLT2t0n2bVFGsyPXyCUclBsIajhV2pKZq/oKr2yo2RrIopzirUGcRUhSsx81HxuSzD5TZPs1n9d54IKR375mlCy4onxVxO+LS4gEHli4N6yR2euze+Iny2b/6fVR3YEjmoAtK++5buiCqG4YnV4XWLeLwvdUn14Lg+5hgnDIFh4MgL7cGhq5yIig+GnUoEKyKAkbYBiwPezBWnTTTROFEGQr8Q1Fj2nkbKDGvxHJ0dRWi9P93i9xoTqb1gq3ryDRIket7iaydcpHm4MJb15RuvCV/FfzZdzQNK6puFaaIipCeNDfYx9t4Y28f5l+GrbdUAAAAAAEAAAACAIN1H/0OXw889QAHA+gAAAAA1hhuPgAAAADWHhaD/kn+8AWOBB8AAAAHAAIAAAAAAAB42mNgZGBgvvHvPQMD67F/nv+OsvYBRVBBJQC3UgesAHjancMBBsIAAIbRv3WHBEhClSIIhACiIJq0sAOsVEQHCAiwY4RIAXaJzhCBQAnI16woljbzvLQtU5J0eTX2XBO9qxZcR0+5anzNGEflEz0pG+uKW2hd1UQdFY2cKlFTXZU/ORu2qn8PVPp5qUKsTR6hrvoSHkN2tLFoscFjzoEeJh22zJj6Hay3sW/BhFGg8wTnYKhZAAAAeNotwQOQGDEAAMA4OdQcFoPatm3btm3bNt+2bdu2bXsXADCg4xKwAewBZ8AN8AR8AH+ACXAAPiACpIACOAJOgDvhUXgVPoRv4U+oCy2hK4yFmbAUNqLBaDyaj1aj7egwOo9uI0fkiyJRKipEtXggHomn4pP4Kn6I3+KfWBdb4iSch6sIJl3IGrKDHCFXyAPyhvwgOsSGeJAQkkBySAWdTk/Ra/QZ/UT/USNqR71oGM2jdYyzHmw6W8w2s/3sNLvOHrP3zJ9Fs3RWzOq54LP4Mr6Jf+Ea3IQ7cB8ewVNET9FfDBeTxXzxSmgKG+Er4iUsjZJ2SOelB9JHSVvylSrk/vIq+absr/RSxigrlEeKg5Kt9lC3qP9UJzWuU99Oq5sBjIRTawABAAAAlgBWAAcAZAAFAAIANABGAIsAAACRDW0ABAABeNqNkANuhVEQhb/ajVNENy+obbtBzaDms72Zrqwr6Cp6Mqn79PObM7wDNPJMDVW1TVDVXFX9wVV08vbB1bTzirG+y7x8cC29ZD64jm4uP7he+uQHt4vAR0p3jHlGdCd5IIFfdko8TFIc0j8q1Sv/AdvssseTbMWRFd0p1mfKEMf6e0kT4k72uamqQZQIjnGGGdU9XrSC+1PhO2OBE07ZwIkq7f/bKpa1QZQYefN4bR+alFHGmBadWpQrMfGhvlECsh4sd420eaN2dkfv545l2Zbx4reINPcM86DIsNQtWU9EOLHMIH7xSNG+fQzipFmlj70lzZPR91HKtm09JdrnjjBPIk/Reh6G3wH0S2RxAAB42mzBBYFCAQAFsLfPubu7u7u7Qj2akIUMpIACbCmSJGnWcpZ2qokiRUrZUNKhU5duPXr16Tdg0JDhNIxkx6gx4yZMmjJtJgdmzZnPmQWLlixbsWrNug2btmzbyY1de/YdOHTk2InTPDhz7sJlPly5duPWnXsPHj159uLVG/nx7sOnL99+/PpL3b+ySloEwYNhAwAAALBmem61bdu27m4SFxYRFROXkJSSlpGVkw9kFRSVlFVU1dQ1AkVNLW0dXT19A0MjYxNTM3MLSytrG1s7ewdHJ2cXVzd3D08v759wKhj8+3RFFzoNBEEAhrHi/iBk5TR6nhAjgkarOCwOffrqv2TS2Dd2M5ds3v0Y/Aw2vl8fdJ3Xc4sIFRoMmPOWGGGCOSo061Xvw3W+WMOZMkKFBgPmEsyxpJ9jsn769fDc5+8rhQkaDNCfK7Fund27j1e6LK0NeYk1dYUBRq0Lvp5m3Gz8VI4l1usX4lebYP3m7qPz49MIk/WOfI5mbhGjRoshc94KY0yxQI3+e/aXMWq0GDKXYoEV/QLT9Qf5DhpTtBiiP1dh03LiHVhaW/IKG+oaQ4xb3+IduNn4qQIrbNa/5TuE60P5DjGma333ejdNlFXx1myk5166W53e99csomcw2pptnXb27p176nTd/IvdvvvqDp7d7zTZ/1900ut8DvbZRrrLSplE80GWM3gsLlDaYVxZpUWsRJyK2BIbP0+sRJyK2B6K/bODoqAWC+liwcqCkTsoyB1cXyiwYwyGrYzWAAAA) format("woff");unicode-range:u+0102-0103,u+0110-0111,u+0128-0129,u+0168-0169,u+01a0-01a1,u+01af-01b0,u+0300-0301,u+0303-0304,u+0308-0309,u+0323,u+0329,u+1ea0-1ef9,u+20ab}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-latin-ext-400-normal-4657f5ab02d5923d223f96a9155a9bdc.woff2) format("woff2"),url(/static/merriweather-latin-ext-400-normal-7b1ee735b2541bc831bd57bacecc9d41.woff) format("woff");unicode-range:u+0100-02af,u+0304,u+0308,u+0329,u+1e00-1e9f,u+1ef2-1eff,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-latin-400-normal-e009f21405b4d7e893674b69deb4cf4a.woff2) format("woff2"),url(/static/merriweather-latin-400-normal-2c455928024d0ee049d896a25f9e30e1.woff) format("woff");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+0304,u+0308,u+0329,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:"MontserratVariable",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-bold:700;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio p,.bio-avatar{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=5e48a86c48a0b5281725f2ec66c2e829" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=5e48a86c48a0b5281725f2ec66c2e829"/><title data-gatsby-head="true">[쿠버네티스 완벽 가이드] 14. 서비스 API 카테고리 (3) - 헤드리스, ExternalName, None-Selector, 인그레스 | Devlog</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Devlog</a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">[쿠버네티스 완벽 가이드] 14. 서비스 API 카테고리 (3) - 헤드리스, ExternalName, None-Selector, 인그레스</h1><p>September 18, 2022</p></header><section itemProp="articleBody"><h1>6.8 헤드리스 서비스(None)</h1>
<p>헤드리스(Headless) 서비스는 대상이 되는 개별 파드의 IP주소가 직접 반환되는 서비스이다. 지금까지 소개한 다른 서비스에서 부하 분산을 위해 제고오디는 엔드포인트는 가상 IP로 로드 밸런싱 동작을 하기 위해 여러 파드로 전송되는 IP 엔드포인트였다면, 헤드리스 서비스는 로드 밸런싱을 하기 위한 IP 주소는 제공되지 않고 DNS 라운드 로빈을 사용한 엔드포인트를 제공한다. 헤드리스 서비스의 DNS 라운드 로빈에서는 목적지 파드 IP 주소가 클러스터 내부 DNS에서 반환되는 형태로 부하 분산을 하기 때문에 클라이언트 DNS 캐시에 주의해야 한다. 또한, 스테이트풀셋이 헤드리스 서비스를 사용하는 경우에만 파드명으로 IP 주소를 디스커버리할 수 있다. 즉, sample-statefulset-0 등의 파드명으로 IP 주소를 가져올 수 있다.</p>
<table>
<thead>
<tr>
<th>서비스 종류</th>
<th>IP 엔드포인트 내용</th>
</tr>
</thead>
<tbody>
<tr>
<td>ClusterIP</td>
<td>쿠버네티스 클러스터 내부에서만 통신이 가능한 가상 IP</td>
</tr>
<tr>
<td>ExternalIP</td>
<td>특정 쿠버네티스 노드의 IP</td>
</tr>
<tr>
<td>NodePort</td>
<td>모든 쿠버네티스 노드의 모든 IP 주소 (0.0.0.0)</td>
</tr>
<tr>
<td>ClusterIP</td>
<td>클러스터 외부에서 제공되는 로드 밸런서의 가상 IP</td>
</tr>
</tbody>
</table>
<h2>6.8.1 헤드리스 서비스 생성</h2>
<p>헤드리스 서비스를 생성하려면 다음 두 가지 조건을 만족해야 한다. 또, 스테이트풀셋과 조합하여 사용하는 경우 특정 조건에서 파드명으로 이름을 해석할 수 있다.</p>
<ul>
<li>서비스의 <code class="language-text">spec.type</code>이 <code class="language-text">ClusterIP</code>일 것</li>
<li>서비스의 <code class="language-text">spec.clusterIP</code>가 <code class="language-text">None</code>일 것</li>
<li>[옵션] 서비스의 <code class="language-text">metadata.name</code>이 스테이트풀셋의 <code class="language-text">spec.serviceName</code>과 같을 것</li>
</ul>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>headless
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> None
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"http-port"</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token string">"TCP"</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>app
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StatefulSet
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>statefulset<span class="token punctuation">-</span>headless
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>headless
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>app
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>app
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
          <span class="token key atrule">image</span><span class="token punctuation">:</span> amsy810/echo<span class="token punctuation">-</span>nginx<span class="token punctuation">:</span>v2.0
<span class="token punctuation">---</span></code></pre></div>
<h2>6.8.2 헤드리스 서비스로 파드명 이름 해석</h2>
<p>서비스 이름 해석은 '서비스명.네임스페이스명.svc.clutser.local`으로 질의한다. 헤드리스 서비스의 경우에느 FQDN에 대해 정방향으로 질의하면 ClusterIP 대신 DNS 라운드 로빈에서 여러 파드의 IP 주소가 반환되기 때문에 부하 분산 때는 클라이언트 캐시 등을 생각해야 한다. 레플리카셋 등의 리소스에도 다음과 같이 DNS 라운드 로빈에서 IP 주소가 반환되도록 할 수 있다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 파드 IP 주소 확인</span>
$ kubectl get pods <span class="token parameter variable">-o</span> wide
NAME                                 READY   STATUS    RESTARTS      AGE     IP           NODE                   NOMINATED NODE   READINESS GATES
sample-statefulset-headless-0        <span class="token number">1</span>/1     Running   <span class="token number">0</span>             2m30s   <span class="token number">10.244</span>.1.3   kind-clusetr-worker3   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>
sample-statefulset-headless-1        <span class="token number">1</span>/1     Running   <span class="token number">0</span>             2m29s   <span class="token number">10.244</span>.3.4   kind-clusetr-worker2   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>
sample-statefulset-headless-2        <span class="token number">1</span>/1     Running   <span class="token number">0</span>             2m28s   <span class="token number">10.244</span>.2.4   kind-clusetr-worker    <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>

<span class="token comment"># 스테이트풀셋의 서비스 디스커버리에서는 DNS 라운드 로빈으로 IP 주소를 반환</span>
$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> sample-pod -- <span class="token function">dig</span> sample-headless.default.svc.cluster.local
<span class="token punctuation">..</span>.
<span class="token punctuation">;</span><span class="token punctuation">;</span> QUESTION SECTION:
<span class="token punctuation">;</span>sample-headless.default.svc.cluster.local. IN A

<span class="token punctuation">;</span><span class="token punctuation">;</span> ANSWER SECTION:
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.2.4
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.2.3
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.1.2
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.3.3
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.1.3
sample-headless.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.3.4

<span class="token comment"># 파드명으로 서비스 디스커버리</span>
$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> sample-pod -- <span class="token function">dig</span> sample-statefulset-headless-0.sample-headless.default.svc.cluster.local
<span class="token punctuation">..</span>.
<span class="token punctuation">;</span><span class="token punctuation">;</span> QUESTION SECTION:
<span class="token punctuation">;</span>sample-statefulset-headless-0.sample-headless.default.svc.cluster.local. IN A

<span class="token punctuation">;</span><span class="token punctuation">;</span> ANSWER SECTION:
sample-statefulset-headless-0.sample-headless.default.svc.cluster.local. <span class="token number">10</span> IN A <span class="token number">10.244</span>.1.3

<span class="token comment"># 컨테이너 내부 resolv.conf 확인</span>
$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> sample-pod -- <span class="token function">cat</span> /etc/resolv.conf
search default.svc.cluster.local svc.cluster.local cluster.local
nameserver <span class="token number">10.96</span>.0.10
options ndots:5</code></pre></div>
<p>일반적으로는 클러스터 내부 DNS에서 파드명으로는 해석할 수 없다. 서비스를 생성할 때 ClusterIP 등과 같은 여러 파드에 대해 엔드포이트가 할당되어 그 엔드포인트의 이름 해석은 불가능하다. 스테이트풀셋이 헤드리스 서비스를 사용하고 서비스의 <code class="language-text">metadata.name</code>이 스테이트풀셋의 <code class="language-text">spec.serviceName</code>이 같은 경우 추가로 <code class="language-text">파드명.서비스명.네임스페이스명.svc.cluster.local</code>를 해석할 수 있다. 또한, 컨테이너 내부의 resolv.conf 등에는 search 지시자로 다음과 같은 엔트리가 들어 있어 <code class="language-text">파드명.서비스명</code>이나 <code class="language-text">파드명.서비스명.네임스페이스명</code> 등으로 질의할 수 있다.</p>
<h2>6.8.3 스테이트풀셋 외의 파드명으로 이름 해석</h2>
<p>스테이트풀셋을 사용하지 않고 해석이 가능하도록 하려면 파드에 설정을 추가해야 한다. 파드에 <code class="language-text">spec.hostname</code>과 해드레스 서비스명과 동일한 <code class="language-text">spec.domain</code> 설정을 추가한다. 이때 <code class="language-text">spec.hostname</code>은 파드명이 아니여도 된다. 이 설정을 추가하면 다음과 같이 파드 단위로 이름 해석이 가능하다.</br>
<code class="language-text">Hostname명.Subdomain/서비스명.네임스페이스명.svc.cluster.local</code></br>
디플로이먼트 등에서 이 설정을 할 경우, 매니페스트 구조상 여러 레프릴카에서는 같은 hostname만 설정할 수 있다. 또한, 같은 hostname이 지정된 경우 하나의 A 레코드만 반환되기 때문에 디플로이먼트 등에서는 개별 파드명으로 해석이 불가능하다.</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>subdomain
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">hostname</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>hostname
  <span class="token key atrule">subdomain</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>subdomain
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> amsy810/tools<span class="token punctuation">:</span>v2.0
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>subdomain
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> None
  <span class="token key atrule">ports</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>app</code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 파드 IP 주소 확인</span>
$ kubectl get pod sample-subdomain <span class="token parameter variable">-o</span> wide
NAME               READY   STATUS    RESTARTS   AGE   IP           NODE                   NOMINATED NODE   READINESS GATES
sample-subdomain   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          10s   <span class="token number">10.244</span>.1.5   kind-clusetr-worker3   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>

<span class="token comment"># 파드명으로 서비스 디스커버리</span>
$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> sample-pod -- <span class="token function">dig</span> sample-hostname.sample-subdomain.default.svc.cluster.local
<span class="token punctuation">..</span>.
<span class="token punctuation">;</span><span class="token punctuation">;</span> QUESTION SECTION:
<span class="token punctuation">;</span>sample-hostname.sample-subdomain.default.svc.cluster.local. IN A

<span class="token punctuation">;</span><span class="token punctuation">;</span> ANSWER SECTION:
sample-hostname.sample-subdomain.default.svc.cluster.local. <span class="token number">30</span> IN A <span class="token number">10.244</span>.1.5</code></pre></div>
<h1>6.9 ExternalName 서비스</h1>
<p>ExternalName 서비스는 일반적인 서비스의 리소스와 달리 서비스명의 이름 해석에 있어 외부 도메인으로 CNAME을 반환한다. 사용 용도를 살펴보면, 다른 이름을 설정하고 싶은 경우, 클러스터 내부에서의 엔드포인트를 쉽게 변경하고 싶을 때 사용한다.</p>
<h2>6.9.1 ExternalName 서비스 생성</h2>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>externalname
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ExternalName
  <span class="token key atrule">externalName</span><span class="token punctuation">:</span> external.example.com</code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 서비스 목록 표시</span>
$ kubectl get <span class="token function">service</span> sample-externalname
NAME                  TYPE           CLUSTER-IP   EXTERNAL-IP            PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>   AGE
sample-externalname   ExternalName   <span class="token operator">&lt;</span>none<span class="token operator">></span>       external.example.com   <span class="token operator">&lt;</span>none<span class="token operator">></span>    14s

<span class="token comment"># 일시적으로 파드를 기동하여 ExternalName의 CNAME 이름 해석을 확인</span>
$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> sample-pod -- <span class="token function">dig</span> sample-externalname.default.svc.cluster.local CNAME
<span class="token punctuation">..</span>.
<span class="token punctuation">;</span><span class="token punctuation">;</span> QUESTION SECTION:
<span class="token punctuation">;</span>sample-externalname.default.svc.cluster.local. IN CNAME

<span class="token punctuation">;</span><span class="token punctuation">;</span> ANSWER SECTION:
sample-externalname.default.svc.cluster.local. <span class="token number">30</span> IN CNAME external.example.com.</code></pre></div>
<p>클러스터 내부에서는 파드와 통신에 서비스 이름 해석을 사용하여 느슨한 결합을 유지하고 있다. 그리고 SaaS나 IaaS 등 외부에 있는 서비스를 사용할 때도 가틍하면 느슨한 결합으로 구성해야 한다.</br>
예를 들어, 애플리케이션 외부의 엔드포인트를 설정에 등록해 두면 외부 애플리케이션 측의 엔드포인트 주소가 변경되면 설정도 변경해줘야 한다. 하지만, ExternalName을 사용했을 경우 목적지가 변경되어도 ExternalName 서비스만 변경하는 것만으로도 대응이 가능하다. 이를 통해 외부 서비스와 느슨한 결합을 유지할 수 있다. </br></p>
<p>또한, ExternalName 서비스를 사용하면 외부 서비스와 쿠버네티스에 배포된 클러스터 내부 서비스와의 전환도 유연하게 할 수 있게 된다. 외부 애플리케이션 측은 서비스의 FQDN을 지정해 두고 이름 해석이 되면 ExternalName의 CNAME 레코드 또는 ClusterIP의 A 레코드가 반환되는 형태가 되어 애플리케이션 측은 변경 없이 내부 서비스와 외부 서비스를 전화할 수 있다. 한 가지 주의할 점은 ClusterIP 서비스에서 ExternalName 서비스로 전환할 경우 <code class="language-text">spec.clusterIP</code>를 명시적으로 공란으로 만들어 두어야 한다는 것이다.</p>
<h1>6.10 None-Selector 서비스</h1>
<p>ExternalName 서비스에서는 서비스명으로 이름 해석을 하면 외부 도메인에 전송되었다. None-Selector 서비스는 서비스명으로 이름 해석을 하면 자신이 설정한 멤버에 대해 로드 밸런싱을 한다. 즉, 쿠버네티스 내에 원하는 목적지로 지금까지 설명했던 형태의 로드 밸런서를 생성할 수 있는 기능이다. 클라이언트 사이드 로드 밸런싱용 엔드포인트를 제공하는 서비스라고도 할 수 있다. 기본적으로 ClusterIP를 사용하여 클러스터 내부 로드 밸런서를 사용하는 경우가 많기 때문에 이 책에서는 ClusterIP를 전제로 하여 설명한다. <code class="language-text">type: LoadBalancer</code>를 지정하는 것도 가능하지만, 쿠버네티스 클러스터의 외부 로드 밸런서에서 수신한 트래픽이 쿠버네티스 클러스터로 전송된 후에 다시 쿠버네티스 클러스터 외부로 전송하는 형태가 되기 때문에 유용하지 못하다. 이는 <code class="language-text">type: NodePort</code>도 마찬가지이다.</br>
<code class="language-text">externalName</code>을 지정하지 않고 셀렉터가 존재하지 않는 서비스를 생성한 후 엔드포인트 리소스를 수동으로 만들면 유연한 서비스를 만들 수 있다.</p>
<h2>6.10.1 None-Selector 서비스 생성</h2>
<p>매니페스트로 생성한 서비스에는 다음과 같이 엔드포인트에 로드 밸런싱 대상 멤버가 등록되어 있다. 멤버를 등록하고 삭제할 경우에는 엔드포인트 리소스만 수정하면 된다.</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>none<span class="token punctuation">-</span>selector
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token punctuation">---</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Endpoints
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>none<span class="token punctuation">-</span>selector
<span class="token key atrule">subsets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">addresses</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">ip</span><span class="token punctuation">:</span> 192.168.1.1
    <span class="token punctuation">-</span> <span class="token key atrule">ip</span><span class="token punctuation">:</span> 192.168.1.2
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre></div>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 생성한 서비스 확인</span>
$ kubectl describe svc sample-none-selector
Name:              sample-none-selector
Namespace:         default
Labels:            <span class="token operator">&lt;</span>none<span class="token operator">></span>
Annotations:       <span class="token operator">&lt;</span>none<span class="token operator">></span>
Selector:          <span class="token operator">&lt;</span>none<span class="token operator">></span>
Type:              ClusterIP
IP Family Policy:  SingleStack
IP Families:       IPv4
IP:                <span class="token number">10.96</span>.23.49
IPs:               <span class="token number">10.96</span>.23.49
Port:              <span class="token operator">&lt;</span>unset<span class="token operator">></span>  <span class="token number">8080</span>/TCP
TargetPort:        <span class="token number">80</span>/TCP
Endpoints:         <span class="token number">192.168</span>.1.1:80,192.168.1.2:80
Session Affinity:  None
Events:            <span class="token operator">&lt;</span>none<span class="token operator">></span></code></pre></div>
<h1>6.11 인그레스</h1>
<p>지금까지 설명했던 ClusterIP, NodePort, ExternalName, None-Selector, Headless Service, LoadBalancer 등은 L4 로드 밸런싱을 제공하는 리소스였다면, 인그레스는 L7 로드 밸런싱을 제공하는 리소스이다. 인그레스는 서비스들을 묶는 서비스들의 상위 객체로, 서비스 종류의 하나로서가 아닌 독립된 리소스로 구성되어 있다. 인그레스를 사용할 때는 <code class="language-text">kind: Service</code> 타입이 아닌, <code class="language-text">kind: Ingress</code> 타입 리소스를 지정한다. 쿠버네티스 Network Policy 리소스에 Ingress/Egress라는 설정 항목이 있지만, 이 인그레스와는 관계가 없다.</p>
<h2>6.11.1 리소스와 컨트롤러</h2>
<p>쿠버네티스는 분산 시스템이며, 매니페스트로 정의한 리소스를 쿠버네티스에 등록하는 것으로 시작된다. 등록만으로는 아무런 처리가 이뤄지지 않으며, 실제 처리를 하는 컨트롤러라는 시스템 구성 요소가 필요하다. 즉, 인그레스가 실제로 가리키는 것은 다양한 개념의 집합이다.</br>
인그레스 리소스란 매니페스트에 등록된 API 리소스르르 의미하고, 인그레스 컨트롤러는 인그레스 리소스가 쿠버네티스에 등록되었을 때 어떤 처리를 한다. GCP에서는 GCLB를 조작하여 L7 로드 밸런서를 설정하거나 Nginx 설정을 변경하여 리로드 하는 등의 처리를 말한다.</p>
<h2>6.11.2 인그레스의 종류</h2>
<p>인그레스의 구현 방법에는 여러 가지가 있고 편의성도 다르지만, 여기서는 실제로 많이 사용되는 GKE 인그레스 컨트롤러와 Nginx 인그레스 컨트롤러를 소개한다. 이 두가지 컨트롤러는 인그레스 리소스를 생성했을 때 처리를 담당하는 리소스이다. 어떤 L7 로드밸런서를 생성할지는 이 인그레스 컨트롤러에 따라 달라진다.</p>
<p>또한, 인그레스는 다음과 같이 크게 두 가지로 분류된다.</p>
<ul>
<li>클러스터 외부 로드 밸런서를 사용한 인그레스: GKE 인그레스</li>
<li>클러스터 내부 인그레스용 파드를 배포하는 인그레스: Nginx 인그레스</li>
</ul>
<h3>클러스터 외부 로드 밸런서를 사용한 인그레스</h3>
<p>GKE처럼 외부 로드 밸런서를 사용한 인그레스의 경우 인그레스 리소스 생성만으로 로드 밸런서의 가상 IP가 할당되어 사용할 수 있다. 따라서 인그레스의 트래픽은 GCP의 GCLB가 트래픽을 수신한 후 GCLB에서 SSL 터미네이션이나 경로 기반 라우팅을 통해 NodePort에 트래픽을 전송함으로써 대상 파드까지 도달한다.</p>
<ol>
<li>클라이언트</li>
<li>-> L7 로드밸런서(NodePort 사용)</li>
<li>-> 목적지 파드</li>
</ol>
<h3>클러스터 내부에 인그레스용 파드를 배포하는 인그레스</h3>
<p>이 패턴은 인그레스 리소스에서 정의한 L7 수준의 로드 밸런싱 처리를 위해 인그레스용 파드를 클러스터 내부에 생성해야 한다. 또 생성한 인그레스용 파드에 대해 클러스터 외부에서 접속할 수 있도록 별도의 인그레스용 파드에 LoadBalancer 서비스를 생성하는 등의 준비가 필요하다. 그리고 인그레스용 파드가 SSL 터미테이션 경로 기반 라우팅 등과 같은 L7 수준의 처리를 하기 위해 부하에 따른 레플리카 수의 오토 스케일링도 고려해야 한다.</br>
인그레스용 파드에 Nginx를 사용한 Nginx 인그레스의 경우 로드 밸런서가 Nginx 파드까지 전송하고, 그 다음에는 Nginx가 L7 수준의 처리를 수행할 파드에 전송한다. 이때 Nginx 파드에서 대상 파드까지는 NodePort를 통과하지 않고 직접 파드 IP 주소로 전송된다. 그 순서를 간략히 하면 다음과 같다.</p>
<ol>
<li>클라이언트</li>
<li>-> L4 로드밸런서(LoadBalancer 사용)</li>
<li>-> Nginx 파드(Nginx 인그레스 컨트롤러)</li>
<li>-> 목적지 파드</li>
</ol>
<h2>6.11.3 인그레스 컨트롤러 배포</h2>
<h3>GKE 인그레스 컨트롤러 배포</h3>
<p>GKE의 경우 클러스터 생성 시 HttpLoadBalancing 애드온을 활성화하면 배포된다. 또 이 애드온은 기본값으로 활성화되어 있기 때문에 4장에서 설명한 순서대로 클러스터를 구축했다면 이미 인그레스를 사용할 수 있다.</p>
<h3>Nginx 인그레스 컨트롤러 배포</h3>
<p>Nginx 인그레스를 사용하는 경우에는 Nginx 인그레스 컨트롤러를 배포해야 한다. Nginx 인그레스에는 인그레스 컨트롤러 자체가 L7 수준의 처리를 하는 파드이기도 하므로, 이름은 컨트롤러이지만 실제 처리도 한다.</br>
클러스터 외부로부터의 통신을 확보하기 위해 Nginx 인그레스 컨트롤러의 파드에 로드 밸런서 서비스(NodePort)를 생성해야 한다. 인그레스 컨트롤러를 한 번 배포하기 위한 매니페스트는 깃허브에 공개되어 있으므로 쉽게 도입할 수 있다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># Nginx 인그레스 컨트롤러 설치(ingress-nginx 네임스페이스에 설치됨)</span>
$ kubectl apply <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.44.0/deploy/static/provider/cloud/deploy.yaml
namespace/ingress-nginx created
serviceaccount/ingress-nginx created
configmap/ingress-nginx-controller created
clusterrole.rbac.authorization.k8s.io/ingress-nginx created
clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx created
role.rbac.authorization.k8s.io/ingress-nginx created
rolebinding.rbac.authorization.k8s.io/ingress-nginx created
service/ingress-nginx-controller-admission created
service/ingress-nginx-controller created
deployment.apps/ingress-nginx-controller created
validatingwebhookconfiguration.admissionregistration.k8s.io/ingress-nginx-admission created
serviceaccount/ingress-nginx-admission created
clusterrole.rbac.authorization.k8s.io/ingress-nginx-admission created
clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created
role.rbac.authorization.k8s.io/ingress-nginx-admission created
rolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created
job.batch/ingress-nginx-admission-create created
job.batch/ingress-nginx-admission-patch created</code></pre></div>
<h2>6.11.4 인그레스 리소스 생성</h2>
<p>인그레스 리소스를 생성하려면 사전 준비가 필요하다. 인그레스는 먼저 생성된 서비스를 백엔드로 전송하는 구조로 되어 있어 아래 매니페스트에 있는 서비스를 생성해야 한다. 백엔드에서 사용하는 서비스는 <code class="language-text">type: NodePort</code>를 지정한다.</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">1</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"http-port"</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token string">"TCP"</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> sample1
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>apps<span class="token punctuation">-</span><span class="token number">1</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> sample1
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
      <span class="token key atrule">image</span><span class="token punctuation">:</span> amsy810/echo<span class="token punctuation">-</span>nginx<span class="token punctuation">:</span>v2.0
      <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">2</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"http-port"</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token string">"TCP"</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> sample2
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>apps<span class="token punctuation">-</span><span class="token number">2</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> sample2
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
      <span class="token key atrule">image</span><span class="token punctuation">:</span> amsy810/echo<span class="token punctuation">-</span>nginx<span class="token punctuation">:</span>v2.0
      <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"http-port"</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token string">"TCP"</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> default
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>default
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">ingress-app</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
      <span class="token key atrule">image</span><span class="token punctuation">:</span> amsy810/echo<span class="token punctuation">-</span>nginx<span class="token punctuation">:</span>v2.0
      <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span></code></pre></div>
<p>위 매니페스트는 각 서비스와 파드가 1:1로 매핑되어 있다. 인그레스에서는 HTTPS를 사용하는 경우 사전에 인증서를 시크릿 리소스로 생성해야 한다. 시크릿은 인증서 정보로 매니페스트를 작성하고 등록하거나 인증서 파일을 지정하여 kubectl create secret 명령어로 생성한다. 여기에서는 서명된 인증서를 생성하여 테스트한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 자체 생성된 인증서 생성</span>
$ openssl req <span class="token parameter variable">-x509</span> <span class="token parameter variable">-nodes</span> <span class="token parameter variable">-days</span> <span class="token number">365</span> <span class="token parameter variable">-newkey</span> rsa:2048 <span class="token punctuation">\</span>
<span class="token parameter variable">-keyout</span> ./tls.key <span class="token parameter variable">-out</span> ./tls.crt <span class="token parameter variable">-subj</span> <span class="token string">"/CN=sample.example.com"</span>
Generating a <span class="token number">2048</span> bit RSA private key
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.+++
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.+++
writing new private key to <span class="token string">'./tls.key'</span>
-----

<span class="token comment"># 시크릿 생성(인증서 파일을 지정한 경우)</span>
$ kubectl create secret tls --save-config tls-sample <span class="token parameter variable">--key</span> ./tls.key <span class="token parameter variable">--cert</span> ./tls.crt
secret/tls-sample created</code></pre></div>
<p>위의 사전 준비를 마쳤다면, 이제는 실제 인그레스 리소스를 생성할 차례이다. 사전 준비에서는 인그레스에서 사용할 서비스 백엔드를 생성했다. 인그레스 리소스는 L7 로드 밸런서이기 때문에 특정 호스트명에 대해 '요청 경로 > 서비스 백엔드' 형태의 쌍으로 전송 규칙을 설정한다. 또한, 하나의 IP 주소에서 여러 호스트명을 처리할 수 있다. <code class="language-text">spec.rules[].http.paths[].backend.servicePort</code>에 설정할 포트 번호는 <code class="language-text">spec.ports[].port</code>를 지정한다. 인그레스 리소스 매니페스트에 정의 가능한 설정은 '클러스터 외부 로드 밸런서를 사용한 인그레스'와 '클러스터 내부에 인그레스용 파드를 배포하는 인그레스'라는 두 가지 방식 중 어떤 방법을 사용하든 거의 비슷하다.</p>
<h3>GKE용 인그레스 리소스 생성</h3>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">defaultBackend</span><span class="token punctuation">:</span>
    <span class="token key atrule">service</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>default
      <span class="token key atrule">port</span><span class="token punctuation">:</span>
        <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> sample.example.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /path1
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">1</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> sample.example.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /path2
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">2</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span>
  <span class="token key atrule">tls</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> sample.example.com
    <span class="token key atrule">secretName</span><span class="token punctuation">:</span> tls<span class="token punctuation">-</span>sample
</code></pre></div>
<p>위의 매니페스트에는 각 경로를 앞에서 생성한 서비스에 전송하게 되어 있다. 또 <code class="language-text">spec.backend</code> 설정에 따라 경로에 일치하지 않을 경우 기본적으로 sample-ingress-default 서비스에 전송한다. 위 매니페스트의 경우 쿠버네티스 1.22 버전 이후에 apiVersion이 networking.k8s.io/v1beta1 -> networking.k8s.io/v1 으로 변경되었기 때문에 backend 하위의 serviceName, servicePort, rules 하위의 backend가 각각 name, port, defaultBackend로 변경되었다.</p>
<ol>
<li>/path1/*</li>
<li>-> sample-ingress-svc-1 서비스</li>
<li>-> sample-ingress-apps-1 파드</li>
</ol>
</br>
<ol>
<li>/path2/*</li>
<li>-> sample-ingress-svc-2 서비스</li>
<li>-> sample-ingress-apps-2 파드</li>
</ol>
</br>
<ol>
<li>
<ul>
<li></li>
</ul>
</li>
<li>-> sample-ingress-default 서비스</li>
<li>-> sample-ingress-default 파드</li>
</ol>
<p>GKE의 경우 특별히 의식하지 않아도 인그레스 리소스마다 자동으로 로드 밸런서의 가상 IP가 할당된다. 따라서 sample-ingress.yaml 매니페스트를 적용하면 다음과 같이 인그레스 리소스가 생성되는 것을 확인할 수 있다. 여러 인그레스 리소스를 생성하면 인그레스 리소스마다 IP주소가 할당된다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 리소스별 API 버전 확인</span>
$ kubectl api-resources <span class="token operator">|</span> <span class="token function">grep</span> ingress
ingressclasses                                 networking.k8s.io/v1                   <span class="token boolean">false</span>        IngressClass
ingresses                         ing          networking.k8s.io/v1                   <span class="token boolean">true</span>         Ingress

<span class="token comment"># 인그레스 리소스 확인</span>
$ kubectl apply <span class="token parameter variable">-f</span>  sample-ingress.yaml
ingress.networking.k8s.io/sample-ingress created

$ kubectl get ingresses
NAME             CLASS    HOSTS                                   ADDRESS         PORTS     AGE
sample-ingress   <span class="token operator">&lt;</span>none<span class="token operator">></span>   sample.example.com,sample.example.com   xx.xx.xx.xx   <span class="token number">80</span>, <span class="token number">443</span>   3m36s

<span class="token comment"># L7 로드밸런서의 가상 IP를 환경 변수에 저장</span>
$ <span class="token assign-left variable">INGRESS_IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>kubectl get ingress sample-ingress <span class="token punctuation">\</span>
<span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.status.loadBalancer.ingress[0].ip}'</span><span class="token variable">`</span></span>

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-svc-1)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path1/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path1/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.6  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-svc-2)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path2/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path2/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-apps-2  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.3  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-default)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.5  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTPS 요청</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path1/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span> <span class="token parameter variable">--insecure</span>
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path1/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.3  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx</code></pre></div>
<h3>Nginx 인그레스용 인그레스 리소스 생성</h3>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>by<span class="token punctuation">-</span>nginx
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">nginx.ingress.kubernetes.io/ssl-redirect</span><span class="token punctuation">:</span> <span class="token string">"false"</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">defaultBackend</span><span class="token punctuation">:</span>
    <span class="token key atrule">service</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>default
      <span class="token key atrule">port</span><span class="token punctuation">:</span>
        <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> sample.example.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /path1
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">1</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span>
  <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> sample.example.com
    <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /path2
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>svc<span class="token punctuation">-</span><span class="token number">2</span>
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">8888</span></code></pre></div>
<p>Nginx 인그레스도 인그레스 리소스 설정은 기본적으로 GKE와 같다. GKE 환경에서 Nginx 인그레스를 사용하는 경우에는 GKE 인그레스가 아닌 Nginx 인그레스를 사용하도록 <code class="language-text">kubernetes.io/ingress.class: nginx</code>의 어노테이션을 지정해야 한다. 또한, Nginx 인그레스가 GKE 인그레스용으로 생성한 인그레스 리소스 sample-ingress를 보고 있어서 동시에 동작하는 경우에는 sample-ingress에도 <code class="language-text">kubernetes.io/ingress.class: gce</code>의 어노테이션을 지정해야 한다. 추가로, Nginx 인그레스는 기본값으로 HTTP로부터의 요청을 HTTPS로 리다이렉트하도록 설정되어 있기 때문에 이번에는 비활성화 한다.</br>
Nginx 인그레스의 경우 인그레스 컨트롤러 디플로이먼트에 대한 LoadBalancer 서비스 IP 주소가 인그레스에도 등록되도록 되어 있다. 그래서 sample-ingress-by-nginx.yaml 매니페스트를 적용하면 다음과 같이 인그레스 리소스가 생성된 것을 확인할 수 있다. 여러 인그레스 리소스를 생성해도 같은 IP 주소를 사용한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token comment"># 인그레스 리소스 목록 확인</span>
$ kubectl get ingresses
NAME                      CLASS    HOSTS                                   ADDRESS         PORTS     AGE
sample-ingress-by-nginx   <span class="token operator">&lt;</span>none<span class="token operator">></span>   sample.example.com,sample.example.com   xx.xx.xx.xx     <span class="token number">80</span>        55s

<span class="token comment"># 서비스에서 해당 IP 주소를 확인해야 함</span>
$ kubectl get services <span class="token parameter variable">-n</span> ingress-nginx
NAME                                 TYPE           CLUSTER-IP    EXTERNAL-IP     PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>                      AGE
ingress-nginx-controller             LoadBalancer   <span class="token number">10.52</span>.2.120   xx.xx.xx.xx     <span class="token number">80</span>:32139/TCP,443:32223/TCP   61s
ingress-nginx-controller-admission   ClusterIP      <span class="token number">10.52</span>.11.86   <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token number">443</span>/TCP                      61s

<span class="token comment"># L7 로드밸런서의 가상 IP를 환경 변수에 저장</span>
$ <span class="token assign-left variable">INGRESS_IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>kubectl get ingress sample-ingress-by-nginx <span class="token punctuation">\</span>
<span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.status.loadBalancer.ingress[0].ip}'</span><span class="token variable">`</span></span>

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-svc-1)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path1/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path1/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.6  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-svc-2)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path2/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path2/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-apps-2  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.3  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTP 요청(/path1/* > sample-ingress-default)</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span>
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.5  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx

<span class="token comment"># 인그레스 리소스 경유의 HTTPS 요청</span>
$ <span class="token function">curl</span> <span class="token parameter variable">-ivk</span> http://<span class="token variable">${INGRESS_IP}</span>/path1/ <span class="token parameter variable">-H</span> <span class="token string">"Host: sample.example.com"</span> <span class="token parameter variable">--insecure</span>
<span class="token assign-left variable">Host</span><span class="token operator">=</span>sample.example.com  <span class="token assign-left variable">Path</span><span class="token operator">=</span>/path1/  <span class="token assign-left variable">From</span><span class="token operator">=</span>sample-ingress-default  <span class="token assign-left variable">ClientIP</span><span class="token operator">=</span><span class="token number">10.178</span>.0.3  <span class="token assign-left variable">XFF</span><span class="token operator">=</span>xx.xx.xx.xx, xx.xx.xx.xx</code></pre></div>
<h2>6.11.5 X-Forwarded-For 헤더에 의한 클라이언트 IP 주소 참조</h2>
<p>인그레스 경유로 들어오는 트래픽에는 기본적으로 X-Forwarded-For(XFF) 헤더가 지정되어 있으므로 클라이언트 IP 주소 (발신 측 IP 주소)를 참조할 수 있게 되어 있다. 환경이나 사용하는 구현에 따라 지정되지 않거나 NAT되어 정확한 값을 참조할 수 없는 경우도 있다.</p>
<h2>6.11.6 인그레스 클래스에 의한 인그레스 분리</h2>
<p>배포한 인그레스 컨트롤러는 클러스터에 등록된 모든 인그레스 리소스를 볼 수 있어 충돌이 발생할 가능성이 있다. 이런 경우 인그레스 클래스를 사용하여 처리하는 대상의 인그레스 리소스를 분리할 수 있다. 예를 들어 서비스 A와 서비스 B가 각각 존재하고 GKE 인그레스 컨트롤러에서 인그레스 리소스를 두 개 생성한 경우, 두 개의 GCLB가 생성되고 엔드포인트는 두 개를 할당받게 된다. 그러나, Nginx 컨트롤러에서도 위의 예상되는 동작만 기대하면 예상치 못한 상황이 발생한다. 인그레스 컨트롤러 자체가 L7 로드 밸런서인 것처럼 구현되어 있어서 아무 설정을 하지 않을 경우 전체 인그레스 리소스를 watch하여 Nginx 파드 설정을 업데이트하므로 분리가 되지 않기 때문이다. </br></p>
<p>이런 분리성을 확보하기 위해 인그레스 리소스에 인그레스 클래스의 어노테이션을 지정하고 Nginx 인그레스 컨트롤러에 해당하는 인그레스 클래스를 설정하여 대상을 분리할 수 있다.</p>
<h1>6.12 정리</h1>
<table>
<thead>
<tr>
<th>서비스 종류</th>
<th>IP 엔드포인트 내용</th>
</tr>
</thead>
<tbody>
<tr>
<td>ClusterIP</td>
<td>쿠버네티스 노드 내부에서만 통신 가능한 가상 IP</td>
</tr>
<tr>
<td>ExternalIP</td>
<td>특정 쿠버네티스 노드의 IP 주소</td>
</tr>
<tr>
<td>NodePort</td>
<td>모든 쿠버네티스 노드의 모든 IP 주소(0.0.0.0)</td>
</tr>
<tr>
<td>LoadBalancer</td>
<td>클러스터 외부에 제공되는 로드 밸런서의 가상 IP</td>
</tr>
<tr>
<td>Headless(None)</td>
<td>파드의 IP 주소를 사용한 DNS 라운드 로빈</td>
</tr>
<tr>
<td>ExternalName</td>
<td>CNAME을 사용한 느슨한 연결 확보</td>
</tr>
<tr>
<td>None-Selector</td>
<td>원하는 목적지 멤버를 설정할 수 있는 다양한 엔드포인트</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>인그레스 종류</th>
<th>구현 예제</th>
</tr>
</thead>
<tbody>
<tr>
<td>클러스터 외부 로드 밸런서를 사용한 인그레스</td>
<td>GKE</td>
</tr>
<tr>
<td>클러스터 내부에 인그레스용 파드를 배포하는 인그레스</td>
<td>Nginx 인그레스</td>
</tr>
</tbody>
</table></section><hr/><footer><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#88a858;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/5e48a86c48a0b5281725f2ec66c2e829/d4bf4/jjong2.avif 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/ee81f/jjong2.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/5e48a86c48a0b5281725f2ec66c2e829/3faea/jjong2.webp 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/6a679/jjong2.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/5e48a86c48a0b5281725f2ec66c2e829/d24ee/jjong2.jpg" data-srcset="/static/5e48a86c48a0b5281725f2ec66c2e829/d24ee/jjong2.jpg 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/64618/jjong2.jpg 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/5e48a86c48a0b5281725f2ec66c2e829/d4bf4/jjong2.avif 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/ee81f/jjong2.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/5e48a86c48a0b5281725f2ec66c2e829/3faea/jjong2.webp 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/6a679/jjong2.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/5e48a86c48a0b5281725f2ec66c2e829/d24ee/jjong2.jpg" srcSet="/static/5e48a86c48a0b5281725f2ec66c2e829/d24ee/jjong2.jpg 50w,/static/5e48a86c48a0b5281725f2ec66c2e829/64618/jjong2.jpg 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><p>Written by <strong>Jongin Park</strong> <!-- -->개발 블로그 (SiverPineValley)<!-- --> </p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/web/jwt&amp;paesto/">← <!-- -->[Web] JWT Token과 PASETO</a></li><li><a rel="next" href="/web/jwt&amp;paesto/">[Web] JWT Token과 PASETO<!-- --> →</a></li></ul><div class="comments-wrapper"><div>Loading script...</div><div></div></div></nav></main><footer>© <!-- -->2025<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/kubernetes/kubernetes_6_3/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-6c3e5a295d1b5bbd1602.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-299e36b4ce0b6b60f725.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-350e9b4aa85349fee1e3.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-4f8231c9854c7667512e.js\"],\"component---src-pages-using-typescript-tsx\":[\"/component---src-pages-using-typescript-tsx-494eb28f8d3f5653c40b.js\"],\"component---src-templates-blog-list-template-js\":[\"/component---src-templates-blog-list-template-js-dbe273d4831c7f277b4f.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-5442f104aebc0a50b155.js\"],\"component---src-templates-tags-js\":[\"/component---src-templates-tags-js-9ba367632c51912a78c9.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="5721163937bb5615e044";</script><script src="/webpack-runtime-4ed9733f823016665dec.js" async></script><script src="/framework-195f9a31e5a4e6cebf51.js" async></script><script src="/app-6c3e5a295d1b5bbd1602.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>