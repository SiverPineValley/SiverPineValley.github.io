{"componentChunkName":"component---src-templates-blog-post-js","path":"/kubernetes/k8s_jsonpath/","result":{"data":{"site":{"siteMetadata":{"title":"Devlog","author":"JonginPark","siteUrl":"https://SiverPineValley.github.io","comment":{"disqusShortName":"","utterances":"SiverPineValley/devlog"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"635c52a9-7751-5d0c-8428-071d0fb182e3","excerpt":"1. JSONPath k8sì—ì„œëŠ” ê°ì¢… ì˜¤ë¸Œì íŠ¸ì˜ ì„¸íŒ… ì •ë³´ë¥¼ YAMLê³¼ JSON í˜•íƒœë¡œ ë³´ì—¬ì£¼ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ëŒ€ë¶€ë¶„ì˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ë“¤ì´ YAML í˜•ì‹ì´ì§€ë§Œ, YAMLì€ JSONìœ¼ë¡œë„ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤. k8s ì˜¤ë¸Œì íŠ¸ë¥¼ ìš´ì˜í•˜ë©´ì„œ  ëª…ë ¹ì–´ëŠ” ì—„ì²­ ìì£¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, íŠ¹ì • ì˜¤ë¸Œì íŠ¸ì˜ í•µì‹¬ì ì¸ ì •ë³´ë“¤ì€  ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°íšŒ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ë‚´ê°€ ë³´ê³  ì‹¶ì€ ì •ë³´ë§Œì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ”  ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì´ ì˜µì…˜ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œëŠ” Json pathâ€¦","html":"<h1 id=\"1-jsonpath\" style=\"position:relative;\"><a href=\"#1-jsonpath\" aria-label=\"1 jsonpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. JSONPath</h1>\n<p>k8sì—ì„œëŠ” ê°ì¢… ì˜¤ë¸Œì íŠ¸ì˜ ì„¸íŒ… ì •ë³´ë¥¼ YAMLê³¼ JSON í˜•íƒœë¡œ ë³´ì—¬ì£¼ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ëŒ€ë¶€ë¶„ì˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ë“¤ì´ YAML í˜•ì‹ì´ì§€ë§Œ, YAMLì€ JSONìœ¼ë¡œë„ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤. k8s ì˜¤ë¸Œì íŠ¸ë¥¼ ìš´ì˜í•˜ë©´ì„œ <code class=\"language-text\">kubectl get {obejct}</code> ëª…ë ¹ì–´ëŠ” ì—„ì²­ ìì£¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, íŠ¹ì • ì˜¤ë¸Œì íŠ¸ì˜ í•µì‹¬ì ì¸ ì •ë³´ë“¤ì€ <code class=\"language-text\">kubectl get {obejct} -o=wide</code> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°íšŒ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ë‚´ê°€ ë³´ê³  ì‹¶ì€ ì •ë³´ë§Œì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” <code class=\"language-text\">kubectl get {obejct} -o=jsonpath=</code> ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì´ ì˜µì…˜ìœ¼ë¡œ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œëŠ” Json pathë¼ëŠ” ì¿¼ë¦¬ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</p>\n</br>\n<h2 id=\"11-jsonpathì˜-ê¸°ë³¸-ë¬¸ë²•\" style=\"position:relative;\"><a href=\"#11-jsonpath%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95\" aria-label=\"11 jsonpathì˜ ê¸°ë³¸ ë¬¸ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1 JSONPathì˜ ê¸°ë³¸ ë¬¸ë²•</h2>\n<p>Json íŒŒì¼ì€ key ì™€ valueë¡œ êµ¬ì„±ë˜ë©°, keyëŠ” String í˜•ì‹ìœ¼ë¡œ, valueì—ëŠ” Number, String, Boolean, Dictionary í˜•ì‹ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. ì—¬ê¸°ì„œ Dictionaryë€ keyì™€ valueë¡œ êµ¬ì„±ëœ Objectì´ë©°, Json pathëŠ” íŠ¹ì • valueë¥¼ ì°¾ì•„ë‚´ê¸° ìœ„í•œ ê²½ë¡œë¥¼ ë‚˜íƒ€ë‚´ëŠ” í‘œí˜„ì‹ì„ ë§í•œë‹¤.</p>\n<p>ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•„ë˜ì™€ ê°™ì€ ë¬¸ë²•ì„ ê°€ì§„ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"vehicles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"car\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$20,000\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wheels\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"X345ERT\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-right\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"X346GRX\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-left\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"X236DEM\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rear-right\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"bus\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$120,000\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n<ul>\n<li>Json pathì—ì„œ ê° í‚¤ ê°’ì„ í†µí•´ ì¿¼ë¦¬ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">vehicles.car</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$20,000\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ê°€ì¥ ë°”ê¹¥ìª½ ì¤‘ê´„í˜¸<code class=\"language-text\">({})</code>ëŠ” Rootë¥¼ ì˜ë¯¸í•œë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.car.color</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token string\">\"blue\"</span> </code></pre></div>\n<ul>\n<li>Array ìš”ì†ŒëŠ” ëŒ€ê´„í˜¸<code class=\"language-text\">[]</code>ë¥¼ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.car.wheels[1].model</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token string\">\"X346GRX\"</span></code></pre></div>\n<ul>\n<li>Array ìš”ì†Œì˜ FilterëŠ” <code class=\"language-text\">?()</code>ë¥¼ í†µí•´ ê°€ëŠ¥í•˜ë‹¤. ê° ìš”ì†Œë¥¼ ë‚˜íƒ€ë‚´ëŠ” í‘œí˜„ì€ <code class=\"language-text\">@</code> ì´ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.car.wheels[?(@.location == \"rear-right\")]</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token string\">\"X236DEM\"</span></code></pre></div>\n</br>\n<h2 id=\"12-wildcard\" style=\"position:relative;\"><a href=\"#12-wildcard\" aria-label=\"12 wildcard permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2 Wildcard</h2>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"vehicles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"car\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$20,000\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wheels\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"X345ERT\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-right\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"brand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"K\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"X346GRX\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-left\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"brand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"K\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"bus\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$120,000\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"wheels\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Z227KLJ\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-right\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"brand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"N\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Z226KLJ\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"front-left\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"brand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"K\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ëª¨ë“  ìš”ì†Œë¥¼ í‘œí˜„í•  ë•ŒëŠ” ì™€ì¼ë“œì¹´ë“œ<code class=\"language-text\">(*)</code>ë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.*.color.</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"white\"</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>List ë‚´ë¶€ì—ì„œë„ ì™€ì¼ë“œì¹´ë“œ<code class=\"language-text\">(*)</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.*.wheels[*].model</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span> <span class=\"token string\">\"X345ERT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"X346GRX\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Z227KLJ\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Z226KLJ\"</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>Filter ë‚´ë¶€ì˜ And ì¡°ê±´ì€ <code class=\"language-text\">&amp;&amp;</code>ë¥¼ í†µí•´ì„œ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$.vehicles.*.wheels[?(@.location == \"front-left\" &amp;&amp; @.brand == \"K\")]</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span> <span class=\"token string\">\"X346GRX\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Z226KLJ\"</span> <span class=\"token punctuation\">]</span></code></pre></div>\n</br>\n<h2 id=\"13-lists\" style=\"position:relative;\"><a href=\"#13-lists\" aria-label=\"13 lists permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3 Lists</h2>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"Apple\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Google\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Microsoft\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Amazon\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Facebook\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Coca-Cola\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Samsung\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Disney\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Toyota\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"McDonald's\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>Listì—ì„œ íŠ¹ì • ë²”ìœ„ ë‚´ì˜ ìš”ì†ŒëŠ” <code class=\"language-text\">(:)</code>ë¥¼ í†µí•´ ì¡°íšŒ ê°€ëŠ¥í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, [0:8:2]ì˜ ê²½ìš° 0ë²ˆì§¸ ìš”ì†Œë¶€í„°, 8ë²ˆì§¸ ìš”ì†Œê¹Œì§€, 2ë²ˆì”© ê±´ë„ˆë›°ì–´ì„œ ì¡°íšŒë¥¼ í•˜ê²Œ ëœë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$[0:8:2]</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"Apple\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Microsoft\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Facebook\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Samsung\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>ë’¤ì—ì„œë¶€í„° ì¡°íšŒí•  ë•ŒëŠ” -1ë¶€í„° ì‹œì‘í•˜ê²Œ ëœë‹¤. ì¦‰, í•­ìƒ ë§¨ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œëŠ” -1 ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">$[-3:]</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"Disney\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"Toyota\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"McDonald's\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<div align=\"left\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 443px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADMUlEQVR42q1V227bOhDM58QSuReSkm05SZ30JOj9ghYt0P7/d2xnl1LjU+A8nT4QpmhxODszS13lnI2IbBgGG8fxf48rFbVSq11f7wA62rAbAjzG7r8PGRL+z/4e9iWMDZCXYvq6WTmq1aamRUwKGwuZNjatbONwAeZzSpaPYnlPxq/U8gvMG8V/V/xQTX8cjPGCMtty22w6NIDiuQEcmwtn2w0XgJyMHqvJQ7HybW/8frK8SFR0RScwfFet3IJh0QBxVnUuJipWZrWGteRlXgKe1fikJh9nIzCkDTDdYPHTZLywCXuJOADAZdIAJJReAMCULYFtsMQvPxbj87r3ESWfIM0GmMFQjmzHZbJ2KKGjFgBVsXkPpmBY9/2QJtkyDsggEBp+rpYOhPkKyChVvs4mC36hVTckx5wZxgCUsZZSZydptOSMXcN7HAb9BHPXsDPEJL8tRjClTGz7k5tSAqj6cFYKVsMaq1XDfAM59hhnCbB82Eo+SeigMKfoGhnlXnbtGirWKsr2KPmmkUeje0h1h/fftzDlN8Pswv6E9QCuStagmSKPpbnDmINhxZofMukYbvfYFMsvAfgFLuPXGY/XDggNCSUXRMAZuhEeG4EpjFI97CQJjuc4TNztteQ0471/oJ+bspWczzj9e2coLFGeRJnYkCG+cMhQJjBCrCqNcQA9Qfd77PnQjDHPp43hubtc0ILOZjpU2y8NpbohxWYYNM09Lmkcnk25k4gOf0CX3F6Y4g/0Ga3mpqxsfBBKJsSmAUwrGOMyyOm5U1w/wl5+XY0eNHq7AyLQ9KTRy5sRdRYAwQQPM54nmEXI4dZ63jEBhr3yCmQiQitDAnX+isXFDen9G8GGjrLpB4fzH7dNRMV1f/LY6EXJL1zDyQhOCTYKHJ7AqlSs+3DWXuKqn18A4TK0p1vE6o0DopOOntHRAXEKrqByU9G3NTTz7tDSu4W193TFurOeZ2iGNU+H6+Yt6IAuXe8UNHiC7anmuBBcvzABTLWtl2zzjsnRKYQcjohTWjpIvtN+UbTcL1j/BFRtttvtnq/+6NvL5yFeHsbh39+e9MevfwKIPMj61z5SvwC7X7DqzRAgSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"jsonpath lists\" title=\"\" src=\"/static/8f6f16ec73159425e2f0b42c41af0108/a120c/jsonpath-lists.png\" srcset=\"/static/8f6f16ec73159425e2f0b42c41af0108/5a46d/jsonpath-lists.png 300w,\n/static/8f6f16ec73159425e2f0b42c41af0108/a120c/jsonpath-lists.png 443w\" sizes=\"(max-width: 443px) 100vw, 443px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</div>\n</br>\n<h2 id=\"14-k8sì—ì„œì˜-jsonpath\" style=\"position:relative;\"><a href=\"#14-k8s%EC%97%90%EC%84%9C%EC%9D%98-jsonpath\" aria-label=\"14 k8sì—ì„œì˜ jsonpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.4 K8Sì—ì„œì˜ JSONPath</h2>\n<p>k8s ê³µì‹ ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ëŠ” JSONPathëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<ol>\n<li>í°ë”°ì˜´í‘œë¥¼ ì‚¬ìš©í•˜ì—¬ JSONPath í‘œí˜„ì‹ ë‚´ë¶€ì˜ í…ìŠ¤íŠ¸ë¥¼ ì¸ìš©í•œë‹¤.</li>\n<li>ëª©ë¡ì„ ë°˜ë³µí•˜ë ¤ë©´ range, end ì˜¤í¼ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n<li>ëª©ë¡ì—ì„œ ë’¤ë¡œ ì´ë™í•˜ë ¤ë©´ negative slice ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤. negative ì¸ë±ìŠ¤ëŠ” ëª©ë¡ì„ â€œìˆœí™˜(wrap around)â€ í•˜ì§€ ì•Šìœ¼ë©°, -index + listLength >= 0 ì¸ í•œ ìœ íš¨í•˜ë‹¤.</li>\n<li>í‘œí˜„ì‹ì€ í•­ìƒ ë£¨íŠ¸ ì˜¤ë¸Œì íŠ¸ì—ì„œ ì‹œì‘í•˜ë¯€ë¡œ $ ì˜¤í¼ë ˆì´í„°ëŠ” ì„ íƒ ì‚¬í•­ì´ë‹¤.</li>\n<li>ê²°ê³¼ ì˜¤ë¸Œì íŠ¸ëŠ” String() í•¨ìˆ˜ë¡œ ì¶œë ¥ëœë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"List\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"items\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"metadata\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"capacity\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"cpu\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"4\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"addresses\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LegacyHostIP\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"metadata\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"127.0.0.2\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"capacity\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"cpu\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"8\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"addresses\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LegacyHostIP\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"127.0.0.2\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span><span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"another\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"127.0.0.3\"</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"myself\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e2e\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"secret\"</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>ê¸°ëŠ¥</th>\n<th>ì„¤ëª…</th>\n<th>ì˜ˆì‹œ</th>\n<th>ê²°ê³¼</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>text</td>\n<td>ì¼ë°˜ í…ìŠ¤íŠ¸</td>\n<td>kind is {.kind}</td>\n<td>kind is List</td>\n</tr>\n<tr>\n<td>@</td>\n<td>í˜„ì¬ ì˜¤ë¸Œì íŠ¸</td>\n<td>{@}</td>\n<td>ì…ë ¥ê³¼ ë™ì¼</td>\n</tr>\n<tr>\n<td>. or []</td>\n<td>ìì‹ ì˜¤í¼ë ˆì´í„°</td>\n<td>{.kind}, {[â€˜kindâ€™]} or {[â€˜name.typeâ€™]}</td>\n<td>List</td>\n</tr>\n<tr>\n<td>..</td>\n<td>ì¬ê·€ í•˜í–¥(recursive descent)</td>\n<td>{..name}</td>\n<td>127.0.0.1 127.0.0.2 myself e2e</td>\n</tr>\n<tr>\n<td>*</td>\n<td>ì™€ì¼ë“œ ì¹´ë“œ. ëª¨ë“  ì˜¤ë¸Œì íŠ¸ ê°€ì ¸ì˜¤ê¸°</td>\n<td>{.items[*].metadata.name}</td>\n<td>[127.0.0.1 127.0.0.2]</td>\n</tr>\n<tr>\n<td>[startğŸ”šstep]</td>\n<td>ì•„ë˜ ì²¨ì ì˜¤í¼ë ˆì´í„°</td>\n<td>{.users[0].name}</td>\n<td>myself</td>\n</tr>\n<tr>\n<td>[,]</td>\n<td>ì¡°í•© ì˜¤í¼ë ˆì´í„°</td>\n<td>{.items[*][â€˜metadata.nameâ€™, â€˜status.capacityâ€™]}</td>\n<td>127.0.0.1 127.0.0.2 map[cpu:4] map[cpu:8]</td>\n</tr>\n<tr>\n<td>?()</td>\n<td>í•„í„°</td>\n<td>{.users[?(@.name==â€œe2eâ€)].user.password}</td>\n<td>secret</td>\n</tr>\n<tr>\n<td>range, end</td>\n<td>ë°˜ë³µ ëª©ë¡</td>\n<td>{range .items[*]}[{.metadata.name}, {.status.capacity}] {end}</td>\n<td>[127.0.0.1, map[cpu:4]] [127.0.0.2, map[cpu:8]]</td>\n</tr>\n<tr>\n<td>â€</td>\n<td>í•´ì„ëœ ë¬¸ìì—´ ì¸ìš©</td>\n<td>{range .items[*]}{.metadata.name}{â€˜\\tâ€™}{end}</td>\n<td>127.0.0.1 127.0.0.2</td>\n</tr>\n</tbody>\n</table>\n<p>kubectl ëª…ë ¹ì–´ì—ì„œëŠ” JSONPATHë¥¼ ì§€ì›í•˜ëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- JSONPATHë¥¼ ì‚¬ìš©í•  kubectl ëª…ë ¹ì–´ë¥¼ ì‹ë³„í•œë‹¤.\n- json output ê²°ê³¼ì˜ ìœ„ì¹˜ë¥¼ í™•ì¸í•œë‹¤.\n- JSONPATHë¥¼ ì„¤ì •í•œë‹¤.\n- `kubectl get {object} -o=jsonpath=`ì— ìƒì„±í•œ JSONPATHë¥¼ ë¶™ì—¬ë„£ëŠ”ë‹¤.</code></pre></div>\n</br>\n<ul>\n<li>ê° ê²°ê³¼ë¥¼ ë³„ë„ rowë¡œ í‘œí˜„í•˜ë ¤ë©´ <code class=\"language-text\">{\\n}</code>ì„ ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">kubectl get nodes -o=jsonpath='{.items[*].metadata.name}{\"\\n\"}{.items[*].status.capacity.cpu}'</code></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">master  node01\n<span class=\"token number\">4</span>       <span class=\"token number\">4</span></code></pre></div>\n</br>\n<ul>\n<li>ìœ„ì™€ ë™ì¼í•œ ê²°ê³¼ë¥¼ <code class=\"language-text\">range</code>ë¥¼ í†µí•´ì„œë„ ì¶œë ¥ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">kubectl get nodes -o=jsonpath='{range .items[*]}{.metadata.name}{\"\\t\"}{.status.capacity.cpu}{\"\\n\"}{end}'</code></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">master  <span class=\"token number\">4</span>\nnode01  <span class=\"token number\">4</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">-o=jsonpath</code> ì˜µì…˜ ë§ê³ , <code class=\"language-text\">-o=custom-columns</code> ì˜µì…˜ì„ í†µí•´ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">kubectl get nodes -o=custom-columns=NODE:.metadata.name,CPU:.status.capacity.cpu</code></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">NODE    CPU\nmaster  <span class=\"token number\">4</span>\nnode01  <span class=\"token number\">4</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">--sort-by=</code> ì˜µì…˜ì„ í†µí•´ì„œëŠ” íŠ¹ì • í•„ë“œë¡œ ì •ë ¬ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<p></br> <code class=\"language-text\">kubectl get nodes -o=custom-columns=NODE:.metadata.name,CPU:.status.capacity.cpu --sort-by=.status.capacity.cpu</code></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">NODE    CPU\nmaster  <span class=\"token number\">2</span>\nnode01  <span class=\"token number\">3</span>\nnode02  <span class=\"token number\">4</span></code></pre></div>","frontmatter":{"title":"[k8s] Jsonpath","date":"August 11, 2023"}}},"pageContext":{"slug":"/kubernetes/k8s_jsonpath/","previous":{"fields":{"slug":"/db/acid/"},"frontmatter":{"title":"[Database] ACID ì›ì¹™"}},"next":{"fields":{"slug":"/embedded/micropython_mip/"},"frontmatter":{"title":"[MicroPython] mipë¥¼ í†µí•œ MicroPython ë¼ì´ë¸ŒëŸ¬ë¦¬ ë°›ê¸°"}}}},"staticQueryHashes":["3128451518","643154061"],"slicesMap":{}}