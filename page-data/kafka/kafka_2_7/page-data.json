{"componentChunkName":"component---src-templates-blog-post-js","path":"/kafka/kafka_2_7/","result":{"data":{"site":{"siteMetadata":{"title":"Devlog"}},"markdownRemark":{"id":"db81cae5-8376-5f19-89f8-e6cc6ac91571","excerpt":"레코드는 타임스탬프, 헤더, 오프셋, 메시지 키, 메시지 값으로 구성되어 있다. Producer가 생성한 레코드가 브로커로 전송되면, 타임스탬프와 오프셋이 지정된다. 브로커에 한 번 적재된 데이터는 수정 불가하고, retention…","html":"</br>\n<div align=\"left\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1c117bca6138d73eb2ceb948f76e440a/2e195/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80.37974683544303%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACC0lEQVR42m2U14pCQRBE/WhfRPAfFHPOOefwoIiiImIOiP/Sy+ll3OviQ9F3Znqqa6pnrm0wGEg2m5VkMimJROIDqVRK5//jWx4cjUZDbNVqVfx+v+RyOalUKlIulxXFYlEymYzk8/k3yGHe5AD2kBcMBsXn84mtVquJ1+uV/X4vz+dT7ve7RsamABGyQqEg5F+vV815PB7yer1ks9koRzgcFlu9XhePx6OJHL/X673R7Xal3W6rKmKz2dQ86zp7SqWSEoZCoT+F6/VazuezHI9HxeFwUCWtVksCgYB6BMntdtM1k3O5XGQ+n+txldAoJA6HQ+n3+29AACFKODYqUWTNYQ+2vBVC9F8hlfmezWYSj8e1i7FYTM1frVa6Ro5V4Qeh2+3+8BBFBnSXZpgGodioB1YPtSnGw+12q/6cTidVSUTJbrdTQgqzzhxrJg+fF4uF+hyNRn8JUcilHI1GWt34RGQOMtRNJpO3Kubxbzwe6+m4h18VosCooPp0OlUPORbfzBmFJme5XP51GUIGxE6no500YIwynhukptP4aHLxmWK8NlQqYTqdVrlUIAIWGdNd0+VIJKJgHb/MN+Ce4qN2mWdFFWB9pxSy2+3idDrF5XKJw+HQjSg1+bwiwG1QD+mg+WMYmCMSUUplIooown1k3XxThDHNtdE5mLnA32AlB8xxfGsOguBA3A9+T8pjFTK9vQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"     2024 12 07    2 47 10\" title=\"\" src=\"/static/1c117bca6138d73eb2ceb948f76e440a/f058b/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png\" srcset=\"/static/1c117bca6138d73eb2ceb948f76e440a/c26ae/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png 158w,\n/static/1c117bca6138d73eb2ceb948f76e440a/6bdcf/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png 315w,\n/static/1c117bca6138d73eb2ceb948f76e440a/f058b/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png 630w,\n/static/1c117bca6138d73eb2ceb948f76e440a/2e195/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-12-07%20%EC%98%A4%ED%9B%84%202.47.10.png 782w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</div>\n</br>\n<ul>\n<li>레코드는 타임스탬프, 헤더, 오프셋, 메시지 키, 메시지 값으로 구성되어 있다. Producer가 생성한 레코드가 브로커로 전송되면, 타임스탬프와 오프셋이 지정된다. 브로커에 한 번 적재된 데이터는 수정 불가하고, retention 정책(용량/기간)에 의해서만 삭제될 수 있다.</li>\n<li>레코드의 <code class=\"language-text\">타임스탬프(timestamp)</code>는 스트림 프로레싱에서 활용하기 위해 시간을 저장하는 용도로 사용된다. 카프카 0.10.0.0 이후 버전부터 추가된 타임스탬프는 Unix timestamp가 포함되며, 프로듀서가 따로 설정하지 않으면 기본적으로는 프로듀스 레코드의 생성 시간이 기록된다. <code class=\"language-text\">message.timestamp.type</code>을 지정하면 브로커 적재 시간 (Log Append Time)으로 설정할 수도 있다.</li>\n<li>레코드의 <code class=\"language-text\">오프셋(offset)</code>은 프로듀서가 전송한 레코드가 브로커에 저장될 때 지정된다. 오프셋은 0부터 시작하여 1씩 증가된다. 컨슈머는 오프셋을 기반으로 처리한 데이터와 앞으로 처리해야 할 데이터를 구분한다. 각 메시지는 파티션별로 고유한 오프셋을 가지므로 컨슈머에서 중복 처리하지 않기 위한 용도로도 사용된다.</li>\n<li>레코드의 <code class=\"language-text\">헤더(header)</code>는 0.11부터 제공된 기능이다. key/value 데이터를 추가할 수 있으며 레코드의 스키마 버전이나 포맷과 같이 데이터 프로세싱에 참고될만한 정보를 담아 사용할 수 있다.</li>\n<li><code class=\"language-text\">메시지 키(key)</code>는 처리하고자 하는 메시지를 구분하는 용도로 사용되며, 이를 <code class=\"language-text\">파티셔닝(Partitioning)</code>이라고 한다. 파티셔닝에 사용되는 메시지 키는 <code class=\"language-text\">파티셔너(Partitioner)</code>에 따라 토픽의 파티션 번호가 지정된다. 파티셔너는 레코드가 토픽 내 어느 파티션으로 전해지는 지를 정해주는 역할을 한다. 키는 필수 값이 아니라 값이 없으면 null로 되며 메시지 키가 null인 레코드는 특정 토픽 파티션에 라운드 로빈으로 전해진다. 키 값이 null이 아니면  키의 해쉬값에 따라 특정 파티션에 전달된다. 즉, 같은 키 값의 데이터들은 같은 파티션에 순서대로 전달되므로 순서가 보장된다고 볼 수 있다.</li>\n<li><code class=\"language-text\">메시지 값(value)</code>은 실절적으로 처리할 데이터가 담기는 공간이다. 메시지 포맷은 제너릭으로 사용자에 의해 정해진다. Float, []Byte, String 등 다양한 형태로 지정 가능하며, 필요에 따라 사용자 지정 포맷으로 직렬화/역직렬화 클래스를 만들어서 사용할 수 있다. 메시지에 어떤 값으로 직렬화/역직렬화되어 저장되었는지 알 수 없으므로 컨슈머는 미리 역직렬화 포맷을 알고 있어야 한다.</li>\n</ul>","frontmatter":{"title":"2-7) 레코드","date":"December 07, 2024","description":null}},"previous":{"fields":{"slug":"/kafka/kafka_2_5/"},"frontmatter":{"title":"2-5) ISR (In-Sync-Replicas)"}},"next":{"fields":{"slug":"/kafka/kafka_2_6/"},"frontmatter":{"title":"2-6) 토픽과 파티션"}}},"pageContext":{"id":"db81cae5-8376-5f19-89f8-e6cc6ac91571","previousPostId":"73d98386-a25c-5816-b2ef-6dae59f28311","nextPostId":"70a44db8-d677-5b0e-81c5-4f9129784b64"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}