---
title: '[백준] [리스트] [11660] 구간 합 구하기 5'
date: 2026-01-2 17:56:22
category: 'Algorithm'
draft: false
---

이번에는 2차원 배열에서 구간 합을 구하는 문제이다.

2차원이다 보니 아무래도 1차원 배열보다는 수식이 복잡할 수 밖에 없지만, 1차원 배열에서 사용한 수식을 사용한다면 그리 어렵지 않게 구현할 수 있다.

#### 1\. 합 배열 구하기

| 1 | 2 | 3 | 4 |
| --- | --- | --- | --- |
| 2 | 3 | 4 | 5 |
| 3 | 4 | 5 | 6 |
| 4 | 5 | 6 | 7 |

문제에서 제시한 예시인데, 먼저 합 배열을 구해야 한다. 2차원 배열이다 보니 좀 헷갈리지만, 직접 값을 구해보면 쉽게 공식을 생각해낼 수 있다.

위 예시에 대한 합 배열은 다음과 같다.

| 1 | 3 | 6 | 10 |
| --- | --- | --- | --- |
| 3 | 8 | 15 | 24 |
| 6 | 15 | 27 | 42 |
| 10 | 24 | 42 | 64 |

(X, Y) 위치에 대한 공식을 범위를 그려 생각해보면 다음과 같다는 사실을 쉽게 알 수 있다.

X, Y보다 1씩 교차로 작은 위치의 합 배열을 더한 뒤, 둘다 1씩 작은 합배열을 뺀 뒤, 마지막으로 X, Y 위치에 주어진 값을 더하면 전체 합배열을 구할 수 있다.

> S(X, Y) = S(X-1, Y) + S(X, Y-1) - S(X-1, Y-1) + A(X, Y)

#### 2\. 구간 합 구하기

구간 합도 마찬가지로 범위를 그려보면서 구해보면 다음과 같이 구할 수 있다.

공식을 찾아내는 것이 조금 헷갈리긴 햇는데, 범위를 그려보면서 하면 그래도 쉽게 구할 수 있었다.

> S(X1, Y1) ~ S(X2, Y2) = S(X2, Y2) - S(X2, Y1-1) - S(X1-1, Y2) + S(X1-1, Y1-1)

#### 3\. 수도 코드

> 1\. N, M 입력 받고, 배열 입력 받기  
> 2\. N+1, N+1 크기로 합 배열 정의하고 전체 0으로 초기화.  
> 3\. 기존 배열 순회하면서 합 배열 구하기. (S(X, Y) = S(X-1, Y) + S(X, Y-1) - S(X-1, Y-1) + A(X, Y))  
> 4\. 구간을 한 줄씩 입력 받으면서 구간 합 구하기 (S(X1, Y1) ~ S(X2, Y2) = S(X2, Y2) - S(X2, Y1-1) - S(X1-1, Y2) + S(X1-1, Y1-1))

이를 구현하면 다음과 같다.

```
"""
    [11660] 구간 합 구하기 5
    링크: https://www.acmicpc.net/problem/11660
    카테고리: 자료구조 > 리스트
    날짜: 2026.01.02 17:05PM
    걸린 시간: 35분
"""
import sys
input = sys.stdin.readline

N, M = map(int, input().split())
matrix = [list(map(int, input().split())) for _ in range(N)]
prefix_sum = [[0] * (N + 1) for _ in range(N + 1)]

for i in range(1, N + 1):
    for j in range(1, N + 1):
        prefix_sum[i][j] = prefix_sum[i-1][j] + prefix_sum[i][j-1] - prefix_sum[i-1][j-1] + matrix[i-1][j-1]

for _ in range(M):
    x1, y1, x2, y2 = map(int, input().split())
    print(prefix_sum[x2][y2] - prefix_sum[x1 - 1][y2] - prefix_sum[x2][y1 - 1] + prefix_sum[x1 - 1][y1 - 1])
```
